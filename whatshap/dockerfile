FROM alpine:3.20.3

# 安装必要的依赖
RUN echo "http://dl-cdn.alpinelinux.org/alpine/edge/testing" >> /etc/apk/repositories && \
    apk update && \
    apk add --no-cache python3 py3-pip gcc musl-dev libffi-dev zlib-dev bzip2-dev xz-dev curl-dev make htslib htslib-tools

# 安装tabix和whatshap
RUN python3 -m venv /opt/venv && \
    /opt/venv/bin/pip install --no-cache-dir --upgrade pip && \
    /opt/venv/bin/pip install --no-cache-dir whatshap
ENV PATH="/opt/venv/bin:$PATH"

# 默认命令
CMD ["whatshap", "--help"]
LABEL maintainer="pzweuj" version="2.3" description="whatshap with tabix"
